"""
Автор:      Гашев Владимир Дмитриевич
Группа:     ИУ7-12Б
Лаба:       №6 — Списки
Задание:    4. Найти наиболее длинную непрерывную последовательность по варианту.
Вариант:    7 — Знакочередующаяся последовательность нечётных чисел.
Описание:   Требуется найти максимальную по длине подпоследовательность смежных элементов,
            где каждый элемент — нечётный, и знаки соседних элементов чередуются.
            Выводится её длина и сама последовательность.
"""

# Ввод списка целых чисел с проверкой
while True:
    try:
        line = input("Введите элементы списка через пробел: ").strip()
        if line == "":
            print("Ошибка: список не должен быть пустым. Повторите ввод.")
            continue
        mass = list(map(int, line.split()))
        break
    except ValueError:
        print("Ошибка: ввод должен содержать только целые числа. Повторите ввод.")

# Поиск наибольшей по длине подпоследовательности нечётных с чередованием знака
best_len = 0
best_start = -1

cur_len = 0
cur_start = 0

i = 0
while i < len(mass):
    x = mass[i]
    if abs(x) % 2 == 1:  # x — нечётный
        if cur_len == 0:
            cur_len = 1
            cur_start = i
        else:
            pred = mass[i - 1]
            if abs(pred) % 2 == 1 and x * pred < 0:  # соседний элемент нечётный и знак чередуется
                cur_len += 1
            else:
                cur_len = 1
                cur_start = i
        if cur_len > best_len:
            best_len = cur_len
            best_start = cur_start
    else:
        cur_len = 0  # чётное число разрывает последовательность
    i += 1

if best_len == 0:
    print("Подходящая подпоследовательность не найдена.")
else:
    best_sub = mass[best_start:best_start + best_len]
    print("Длина наибольшей знакочередующейся подпоследовательности нечётных чисел:", best_len)
    print("Подпоследовательность:", best_sub)