"""
Автор:      Гашев Владимир Дмитриевич
Группа:     ИУ7-12Б
Лаба:       №6 — Списки
Задание:    3. Найти значение K-го экстремума в списке.
Описание:   Экстремум — элемент, который одновременно больше двух соседей (локальный максимум)
            либо меньше двух соседей (локальный минимум). Элементы на краях не рассматриваются.
            Ввод списка, проверка корректности, ввод K (натуральное). Поиск K-го экстремума.
"""

# Ввод списка целых чисел с проверкой
while True:
    try:
        line = input("Введите элементы списка через пробел: ").strip()
        if line == "":
            print("Ошибка: список не должен быть пустым. Повторите ввод.")
            continue
        mass = list(map(int, line.split()))
        break
    except ValueError:
        print("Ошибка: ввод должен содержать только целые числа. Повторите ввод.")

# Ввод K с проверкой (натуральное число)
while True:
    try:
        k = int(input("Введите номер экстремума K (натуральное число): "))
        if k >= 1:
            break
        print("Ошибка: K должно быть натуральным (>= 1).")
    except ValueError:
        print("Ошибка: нужно ввести целое число. Повторите ввод.")

# Если длина меньше 3, экстремумов быть не может
if len(mass) < 3:
    print("Во введённом списке недостаточное количество экстремумов.")
else:
    count = 0
    i = 1
    found = False
    while i <= len(mass) - 2:
        if (mass[i] > mass[i - 1] and mass[i] > mass[i + 1]) or (mass[i] < mass[i - 1] and mass[i] < mass[i + 1]):
            count += 1
            if count == k:
                print(f"Экстремум номер {k} имеет значение {mass[i]}")
                found = True
                break
        i += 1

    if not found:
        print("Во введённом списке недостаточное количество экстремумов.")